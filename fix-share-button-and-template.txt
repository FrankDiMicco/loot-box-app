================================================================================
FIX: Replace "Template" button with "Share" on local boxes + fix error
================================================================================

PROBLEM
-------
1. Every box card shows a "Template" button which is confusing
2. Clicking it shows "Failed to create template" (Firestore function broken)
3. Local boxes have no Share button -- only shared/community boxes do
4. Users don't care about "templates" -- they just want to share

DESIRED BEHAVIOR
----------------
- LOCAL boxes: Show a "Share" button that shares a COPY of the box design
  (template under the hood -- recipient gets their own independent copy
  with fresh pull history)
- SHARED boxes: Keep the existing "Share" button that shares the LIVE link
  (everyone pulls from the same pool, same as current behavior)
- NO box should show a button labeled "Template" -- always say "Share"
- The Template button in BoxOpener header should also be renamed to "Share"
  (for local boxes) or removed if redundant with the existing Share button

CHANGES NEEDED IN index.html
-----------------------------

CHANGE 1: Fix saveBoxTemplate function
The function is likely failing because it can't write to Firestore.
Find the saveBoxTemplate function and make sure it:
  a) Checks firebaseEnabled before attempting Firestore writes
  b) Has proper error handling with try/catch
  c) Returns null on failure (which it should already do)
  
  If the function doesn't exist yet, here's what it should look like:

    const saveBoxTemplate = async (box) => {
      if (!firebaseEnabled || !db) return null;
      try {
        const shareCode = generateShareCode();
        const templateData = {
          templateId: shareCode,
          name: box.name,
          items: (box.items || []).map(item => ({
            id: item.id,
            name: item.name,
            percentage: item.percentage,
            color: item.color,
            maxQuantity: item.maxQuantity || null,
            imageUrl: item.imageUrl || null,
          })),
          boxImageId: box.boxImageId || null,
          hideContents: box.hideContents || false,
          hideOdds: box.hideOdds || false,
          maxPulls: box.maxPulls || null,
          createdBy: getUserSettings().displayName || 'Anonymous',
          createdAt: Date.now(),
          shareCode: shareCode,
          expiresAt: null,
        };
        await db.collection('boxTemplates').doc(shareCode).set(templateData);
        return shareCode;
      } catch (error) {
        console.error('Error saving box template:', error);
        return null;
      }
    };

  Make sure the Firestore rules include boxTemplates (check firebase rules.txt):
    match /boxTemplates/{templateId} {
      allow read: if true;
      allow write: if true;
    }


CHANGE 2: In BoxCard component - replace Template button with Share for local boxes

Find the "Template" button in BoxCard. Remove it and replace the share
logic so that:

- For LOCAL boxes (box.type === 'local'): Show a "Share" button that calls
  saveBoxTemplate and shares the template URL using the format:
    #/template/{shareCode}

- For SHARED boxes (box.type === 'shared'): Keep the existing "Share" button
  that shares the live box URL using the format:
    #/box/{shareCode}

The result should be ONE "Share" button per box card (not two), and it should
do the right thing based on box type.

Here's the logic for the unified Share button:

  For LOCAL boxes, onClick should:
    a) Call saveBoxTemplate(box)
    b) If shareCode is null, show error toast "Failed to share box"
    c) Build URL: `${window.location.origin}${window.location.pathname}#/template/${shareCode}`
    d) Use navigator.share() on mobile, clipboard on desktop
    e) Show success toast "Share link copied!"

  For SHARED boxes, onClick should (keep existing behavior):
    a) Build URL: `${window.location.origin}${window.location.pathname}#/box/${box.shareCode}`
    b) Use navigator.share() on mobile, clipboard on desktop
    c) Show success toast "Link copied to clipboard!"

Style the Share button the same for both box types -- use the existing
royal blue gradient: linear-gradient(135deg, #4169e1 0%, #1e40af 100%)

Do NOT show a Share button on visitor boxes (box.isVisitor === true).


CHANGE 3: In BoxOpener component - same fix for the header buttons

Find the "Template" button in BoxOpener's header area. Apply the same
logic as Change 2:

- For LOCAL boxes: One "Share" button that creates a template link
- For SHARED boxes: One "Share" button that shares the live link
- Remove any button labeled "Template"
- Do NOT show Share on visitor boxes


CHANGE 4: Remove any duplicate share buttons

After changes 2 and 3, make sure there is only ONE Share button per box
card and ONE Share button in the BoxOpener header. No duplicates.


================================================================================
TESTING
================================================================================
1. Create a LOCAL box with some items
2. Verify the box card shows a "Share" button (not "Template")
3. Click Share on the local box -- should copy a template link
4. Open the link in another browser/incognito -- should show import dialog
5. Create a SHARED box
6. Verify the shared box card also shows a "Share" button
7. Click Share on the shared box -- should copy the live box link
8. Open that link -- should go directly to the live shared box
9. Verify visitor boxes do NOT show a Share button
10. Open a box and verify the BoxOpener header has the same behavior
