================================================================================
FIX: Per-box name prompt never shows -- always falls back to "Guest"
================================================================================

PROBLEM
-------
The per-box name feature was implemented but the prompt never appears.
This is because getUserSettings() returns displayName: 'Guest' as the
default, so the userName fallback chain in BoxOpener always finds a
value and never triggers the name prompt.

The chain is:
  1. getBoxUserName(shareCode) -> '' (no per-box name yet)
  2. getLastUsedName() -> '' (no last used name)
  3. getUserSettings().displayName -> 'Guest' (always has a value!)

Since 'Guest' is truthy, userName is never empty, so the prompt
never fires.

FIXES IN index.html
--------------------

FIX 1: Don't treat 'Guest' as a real name

In the BoxOpener userName initialization, change:

    const [userName, setUserName] = useState(() => {
      if (box.type === 'shared' && box.shareCode) {
        const boxName = getBoxUserName(box.shareCode);
        if (boxName) return boxName;
        return getLastUsedName() || getUserSettings().displayName || '';
      }
      return getUserSettings().displayName || 'You';
    });

To:

    const [userName, setUserName] = useState(() => {
      if (box.type === 'shared' && box.shareCode) {
        // Check for a name saved specifically for this box
        const boxName = getBoxUserName(box.shareCode);
        if (boxName) return boxName;
        // Check for a last used name from another box
        const lastName = getLastUsedName();
        if (lastName) return lastName;
        // Check for a real display name (not the default 'Guest')
        const settings = getUserSettings();
        if (settings.displayName && settings.displayName !== 'Guest') {
          return settings.displayName;
        }
        // No name found -- will trigger prompt
        return '';
      }
      // Solo boxes use global display name
      const settings = getUserSettings();
      return settings.displayName && settings.displayName !== 'Guest'
        ? settings.displayName : 'You';
    });


FIX 2: Change default displayName from 'Guest' to empty string

In getUserSettings(), find the default object (appears twice -- the
try block return and the catch block return):

    displayName: 'Guest',

Change BOTH to:

    displayName: '',

This way a user who hasn't set a name has an empty displayName,
which correctly triggers the name prompt for group boxes.


FIX 3: Settings modal should show placeholder, not 'Guest'

In the SettingsModal component, the displayName state initializes
from userSettings.displayName. Since we changed the default to '',
the input will be empty for new users, which is correct. The
placeholder text "Enter your name" will show instead.

No code change needed here -- just confirming it works.


FIX 4: Force prompt for group boxes that don't have a per-box name

As extra insurance, update the handleOpen check. Find:

    if (box.type === 'shared' && !userName && !needsName) {
      setNeedsName(true);
      return;
    }

Change to:

    if (box.type === 'shared' && (!userName || userName === 'Guest') && !needsName) {
      setNeedsName(true);
      return;
    }

This catches any leftover 'Guest' values from existing localStorage.


FIX 5: Settings cog should work

Verify in the App component that the Header's onSettingsClick is:

    onSettingsClick={() => setShowSettings(true)}

And NOT still:

    onSettingsClick={() => info('Settings coming soon!')}

Also verify that showSettings state variable exists:

    const [showSettings, setShowSettings] = useState(false);

And that SettingsModal is rendered in the App's return:

    <SettingsModal
      show={showSettings}
      onClose={() => setShowSettings(false)}
      userSettings={userSettings}
      onSave={handleSaveSettings}
    />


================================================================================
TESTING
================================================================================
1.  Clear localStorage (DevTools > Application > Clear) for a fresh start
2.  Open app -- no name set anywhere
3.  Tap settings cog -- modal should open
4.  Enter "Frank", save -- closes modal
5.  Open a SOLO box -- pulls should show "Frank"
6.  Open a GROUP box you created -- should prompt for a name
    (pre-filled with "Frank" since it's the display name)
7.  Enter "Dad" -- should save, chest opens
8.  Back out, open a DIFFERENT group box -- should prompt again
    (pre-filled with "Dad" since it was last used)
9.  Enter "Big Mike" -- saves for this box
10. Go back to first group box -- auto-loads "Dad", no prompt
11. See "Playing as Dad - tap to change"
12. Tap it, change to "Daddy-O"
13. Second group box still "Big Mike"
14. Solo boxes still show "Frank"
