================================================================================
FIX: Share button missing from Group box card when participant sharing is ON
================================================================================

PROBLEM
-------
When a creator enables "Allow Participants to Share" on a group box,
the Share (or Invite) button only appears inside the BoxOpener (chest
opening screen), not on the BoxCard on the home screen. Visitors
should see the button in both places.

ROOT CAUSE
----------
The recent box card redesign hardcoded the Share button footer to only
show for non-visitors:

    {!box.isVisitor && ( ... Share button ... )}

But it needs to also check allowParticipantSharing, which was only
updated in the BoxOpener header per the original instructions.

FIX IN index.html - BoxCard component
--------------------------------------

CHANGE 1: Update the Share button condition in the card footer

Find the Share button in the BoxCard footer section. It currently has
a condition like:

    {!box.isVisitor && (

Change to:

    {(!box.isVisitor || box.allowParticipantSharing) && (


CHANGE 2: Show "Invite" label for visitors, "Share" for creators

Update the button text to differentiate:

    {box.isVisitor ? 'Invite' : 'Share'}


CHANGE 3: Ensure visitors share the LIVE box link (not a template)

When a visitor clicks Invite, it should always share the live group
box URL, not create a template. Check the share handler (handleShare
or whatever the onClick calls). The logic should be:

    If box.type === 'shared' (which it always will be for visitors):
      url = `${window.location.origin}${window.location.pathname}#/box/${box.shareCode}`

    If box.type === 'local' (creator only):
      url = template URL via saveBoxTemplate()

This logic should already be correct from the earlier share button
fix, but verify it works for visitors too.


CHANGE 4: Ensure allowParticipantSharing is on the visitor's box object

When a visitor joins a shared box, the visitorRef object stored in
localStorage needs to include the allowParticipantSharing field.

In the App component, find where visitorRef is constructed (in the
loadSharedBox or handleSharedBoxURL flow). Make sure it includes:

    allowParticipantSharing: box.allowParticipantSharing || false,

Also in the subscribeToSharedBox callback, if the box data is
updated, make sure the local reference gets the updated value of
allowParticipantSharing.


================================================================================
TESTING
================================================================================
1. Create a shared/group box with "Allow Participants to Share" ON
2. Share the link, open as visitor in another browser
3. Visitor should see "Invite" button on the box CARD (home screen)
4. Visitor taps Invite -- should copy the live group box URL
5. Open that URL in a third browser -- should join the same group box
6. Create a shared box with sharing OFF
7. Visitor should NOT see any button on the card footer
8. Creator should always see "Share" on their own group box cards
9. Local boxes: creator sees "Share" (creates template), no change
